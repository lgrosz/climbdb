BEGIN;
SELECT plan(8);

SELECT has_table( 'climbs' );

SELECT has_column( 'climbs', 'id' );
SELECT col_is_pk( 'climbs', 'id' );

SELECT has_column( 'climbs', 'name' );
SELECT col_has_check( 'climbs', 'name' );

SELECT has_column( 'areas', 'description' );
SELECT col_type_is( 'areas', 'description', 'text' );

PREPARE insert_climb_with_empty_name AS INSERT INTO climbs (name) VALUES ('');
SELECT throws_ok(
    'insert_climb_with_empty_name',
    '23514',
    'new row for relation "climbs" violates check constraint "climbs_name_check"',
    'Cannot insert climb with empty name'
);

SELECT * FROM finish();
ROLLBACK;
