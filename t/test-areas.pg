BEGIN;
SELECT plan(6);

SELECT has_table( 'areas', 'Has area table' );

SELECT has_column( 'areas', 'id', 'Area table has id column' );
SELECT col_is_pk( 'areas', 'id', 'Area table id column is primary key' );

SELECT has_column( 'areas', 'name', 'Area table has name column' );
SELECT col_has_check( 'areas', 'name', 'Area table name column has check constraint' );

PREPARE insert_area_with_empty_name AS INSERT INTO areas (name) VALUES ('');
SELECT throws_ok(
    'insert_area_with_empty_name',
    '23514',
    'new row for relation "areas" violates check constraint "areas_name_check"',
    'Cannot insert area with empty name'
);

SELECT * FROM finish();
ROLLBACK;
